@model EnrollmentPortal.Models.Entities.SubjectFile

@{
    ViewData["Title"] = "Delete Subject";
}

<div>
    <div class="card card-box-shadow">
        <div class="card-header">
            <h3>Are you sure you want to delete this?</h3>
            <h4>Subject Code: @Model?.SFSUBJCODE</h4>
        </div>
        <div class="card-body">
            <div class="row mb-3">
                <div class="form-group col-sm">
                    <label class="control-label">Subject Code</label>
                    <input class="form-control" value="@Html.DisplayFor(model => model.SFSUBJCODE)" disabled />
                </div>
                <div class="form-group col-sm">
                    <label class="control-label">Description</label>
                    <input class="form-control" value="@Html.DisplayFor(model => model.SFSUBJDESC)" disabled />
                </div>
                <div class=" form-group col-sm">
                    <label class="control-label">Units</label>
                    <input class="form-control" value="@Html.DisplayFor(model => model.SFSUBJUNITS)" disabled />
                </div>
            </div>
            <div class="row mb-3">
                <div class="form-group col-sm">
                    <label class="control-label">Category</label>
                    <input class="form-control" value="@Html.DisplayFor(model => model.SFSUBJCATEGORY)" disabled />
                </div>
                <div class="form-group col-sm">
                    <label class="control-label">Regular Offering</label>
                    <input class="form-control" value="@Html.DisplayFor(model => model.SFSUBJREGOFRNG)" disabled />
                </div>
                <div class=" form-group col-sm">
                    <label class="control-label">Year</label>
                    <input class="form-control" value="@Html.DisplayFor(model => model.SFSUBJSCHLYR)" disabled />
                </div>
            </div>
            <div class="row mb-3">
                <div class="form-group col-sm">
                    <label class="control-label">Status</label>
                    <input class="form-control" value="@Html.DisplayFor(model => model.SFSUBJSTATUS)" disabled />
                </div>
                <div class="form-group col-sm">
                    <label class="control-label">Course</label>
                    <input class="form-control" value="@Html.DisplayFor(model => model.Course.Code)" disabled />
                </div>
                <div class=" form-group col-sm">
                    <label class="control-label">Curriculum</label>
                    <input class="form-control" value="@Html.DisplayFor(model => model.SFSUBJCURRCODE)" disabled />
                </div>
            </div>
            <div class="mb-3">
                <h2>
                    Requisite Subject
                </h2>
            </div>
            <div class="mb-3">
                <table class="table d-none d-md-table table-shadow" id="requisiteTable">
                    <thead>
                        <tr>
                            <th>
                                Code
                            </th>
                            <th>
                                Description
                            </th>
                            <th>
                                Units
                            </th>
                            <th>
                                Category
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Rows will be added here dynamically -->
                    </tbody>
                </table>

                <!-- Card Layout for Mobile -->
                <div class="d-md-none" id="requisiteCard">
                </div>
            </div>
            <div>
                <form asp-action="Delete">
                    <input type="hidden" asp-for="Id" />
                    <input type="submit" value="Delete" class="btn btn-danger" />
                    <a class="btn btn-outline-dark mx-3" asp-action="Index"> &#10502; Back</a>
                </form>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script>
    $(document).ready(function () {

        // Deserialize JSON in JavaScript
        const requisites = @Html.Raw(ViewData["SubjectPreqFilesJson"]);

        if (requisites.$values) {
            // work with the requisites data in JavaScript
            requisites.$values.forEach(requisite => {
                var newRowReq = `
                                        <tr>
                                            <td>${requisite.Code}</td>
                                            <td>${requisite.Description}</td>
                                            <td>${requisite.Units}</td>
                                            <td>${requisite.Category}</td>
                                        </tr>
                                    `;

                // Append the new row to the requisite table
                $('#requisiteTable tbody').append(newRowReq);

                var cardNewRowReq = `
                            <div class="card card-box-shadow mb-3">
                                <div class="card-body">
                                        <h5 class="card-title">Subject: ${requisite.Code} </h5>
                                    <p class="card-text">
                                        <strong> Decription:</strong> ${requisite.Description} <br>
                                        <strong>Units:</strong> ${requisite.Units} <br>
                                        <strong>Category:</strong> ${requisite.Category}
                                    </p>
                                </div>
                            </div>
                        `;

                $('#requisiteCard').append(cardNewRowReq);
            });
        }
    });
</script>
